{"ast":null,"code":"import _defineProperty from \"C:/Users/aelsh/Documents/PolyMtl/H2023/INF3710/TP4/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { CommunicationService } from 'src/app/services/communication.service';\nimport { formatDate } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"src/app/services/communication.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/core\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/material/stepper\";\nimport * as i10 from \"@angular/material/datepicker\";\nimport * as i11 from \"@angular/material/select\";\nimport * as i12 from \"@angular-material-components/datetime-picker\";\nfunction ReservationFormDialogComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"Member & Dates\");\n  }\n}\nfunction ReservationFormDialogComponent_ng_template_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"Choose Vehicle\");\n  }\n}\nfunction ReservationFormDialogComponent_mat_option_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const vehicle_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", vehicle_r6.plate);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate3(\" \", vehicle_r6.brand, \" - \", vehicle_r6.model, \" (\", vehicle_r6.plate, \") \");\n  }\n}\nexport let ReservationFormDialogComponent = /*#__PURE__*/(() => {\n  class ReservationFormDialogComponent {\n    constructor(fb, dialogRef, data, http) {\n      _defineProperty(this, \"fb\", void 0);\n      _defineProperty(this, \"dialogRef\", void 0);\n      _defineProperty(this, \"data\", void 0);\n      _defineProperty(this, \"http\", void 0);\n      _defineProperty(this, \"firstFormGroup\", void 0);\n      _defineProperty(this, \"secondFormGroup\", void 0);\n      _defineProperty(this, \"vehicles\", void 0);\n      this.fb = fb;\n      this.dialogRef = dialogRef;\n      this.data = data;\n      this.http = http;\n      this.createFormGroups();\n    }\n    createFormGroups() {\n      this.firstFormGroup = this.fb.group({\n        membernum: ['', Validators.required],\n        startdate: ['', Validators.required],\n        enddate: ['', Validators.required]\n      });\n      this.secondFormGroup = this.fb.group({\n        vehicleplate: ['', Validators.required]\n      });\n    }\n    retrieveVehicles() {\n      // Get the start and end dates from the formGroup\n      if (this.firstFormGroup.valid) {\n        const startDate = this.firstFormGroup.get('startdate')?.value;\n        const endDate = this.firstFormGroup.get('enddate')?.value;\n        // Convert the start and end dates into TIMESTAMP format\n        const startDateTimestamp = formatDate(startDate, 'yyyy-MM-dd HH:mm:ss', 'en');\n        const endDateTimestamp = formatDate(endDate, 'yyyy-MM-dd HH:mm:ss', 'en');\n        // Call the service method to fetch available vehicles during the date range\n        this.http.getAvailableVehicles(startDateTimestamp, endDateTimestamp).subscribe(vehicles => {\n          this.vehicles = vehicles;\n        });\n      }\n    }\n    onSubmit() {\n      // do sum\n    }\n  }\n  _defineProperty(ReservationFormDialogComponent, \"\\u0275fac\", function ReservationFormDialogComponent_Factory(t) {\n    return new (t || ReservationFormDialogComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i3.CommunicationService));\n  });\n  _defineProperty(ReservationFormDialogComponent, \"\\u0275cmp\", /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ReservationFormDialogComponent,\n    selectors: [[\"app-reservation-form-dialog\"]],\n    decls: 40,\n    vars: 10,\n    consts: [[1, \"form\"], [3, \"linear\"], [\"stepper\", \"\"], [1, \"stepper\", 3, \"stepControl\"], [3, \"formGroup\"], [\"matStepLabel\", \"\", \"class\", \"stepper\"], [\"appearance\", \"fill\", 2, \"padding-top\", \"5px\"], [\"matInput\", \"\", \"formControlName\", \"membernum\", \"placeholder\", \"Member Number\"], [\"appearance\", \"outline\"], [\"matInput\", \"\", \"readonly\", \"\", \"formControlName\", \"startdate\", \"placeholder\", \"Start Date\", 3, \"ngxMatDatetimePicker\"], [\"matSuffix\", \"\", 3, \"for\"], [\"startDatePicker\", \"\"], [\"matInput\", \"\", \"readonly\", \"\", \"formControlName\", \"enddate\", \"placeholder\", \"End Date\", 3, \"ngxMatDatetimePicker\"], [\"endDatePicker\", \"\"], [\"mat-button\", \"\", \"matStepperNext\", \"\", 3, \"click\"], [3, \"stepControl\"], [\"matStepLabel\", \"\"], [\"formControlName\", \"vehicleplate\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"mat-button\", \"\", \"matStepperPrevious\", \"\"], [\"mat-button\", \"\", 3, \"click\"], [3, \"value\"]],\n    template: function ReservationFormDialogComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-dialog-content\", 0)(1, \"mat-horizontal-stepper\", 1, 2)(3, \"mat-step\", 3)(4, \"form\", 4);\n        i0.ɵɵtemplate(5, ReservationFormDialogComponent_ng_template_5_Template, 1, 0, \"ng-template\", 5);\n        i0.ɵɵelementStart(6, \"mat-form-field\", 6)(7, \"mat-label\");\n        i0.ɵɵtext(8, \"Member Number\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"input\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"mat-form-field\", 8)(11, \"mat-label\");\n        i0.ɵɵtext(12, \"Start Date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"input\", 9)(14, \"mat-datepicker-toggle\", 10)(15, \"ngx-mat-datetime-picker\", null, 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"mat-form-field\", 8)(18, \"mat-label\");\n        i0.ɵɵtext(19, \"End Date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(20, \"input\", 12)(21, \"mat-datepicker-toggle\", 10)(22, \"ngx-mat-datetime-picker\", null, 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"div\")(25, \"button\", 14);\n        i0.ɵɵlistener(\"click\", function ReservationFormDialogComponent_Template_button_click_25_listener() {\n          return ctx.retrieveVehicles();\n        });\n        i0.ɵɵtext(26, \"Next\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(27, \"mat-step\", 15)(28, \"form\", 4);\n        i0.ɵɵtemplate(29, ReservationFormDialogComponent_ng_template_29_Template, 1, 0, \"ng-template\", 16);\n        i0.ɵɵelementStart(30, \"mat-form-field\", 6)(31, \"mat-label\");\n        i0.ɵɵtext(32, \"Vehicle\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"mat-select\", 17);\n        i0.ɵɵtemplate(34, ReservationFormDialogComponent_mat_option_34_Template, 2, 4, \"mat-option\", 18);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(35, \"div\")(36, \"button\", 19);\n        i0.ɵɵtext(37, \"Back\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"button\", 20);\n        i0.ɵɵlistener(\"click\", function ReservationFormDialogComponent_Template_button_click_38_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵtext(39, \"Confirm\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        const _r2 = i0.ɵɵreference(16);\n        const _r3 = i0.ɵɵreference(23);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"linear\", true);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"stepControl\", ctx.firstFormGroup);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.firstFormGroup);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngxMatDatetimePicker\", _r2);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"for\", _r2);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngxMatDatetimePicker\", _r3);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"for\", _r3);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"stepControl\", ctx.secondFormGroup);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.secondFormGroup);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.vehicles);\n      }\n    },\n    dependencies: [i4.NgForOf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i5.MatButton, i2.MatDialogContent, i6.MatOption, i7.MatFormField, i7.MatLabel, i7.MatSuffix, i8.MatInput, i9.MatStep, i9.MatStepLabel, i9.MatStepper, i9.MatStepperNext, i9.MatStepperPrevious, i10.MatDatepickerToggle, i11.MatSelect, i12.NgxMatDatetimePicker, i12.NgxMatDatetimeInput],\n    styles: [\".stepper[_ngcontent-%COMP%]{padding:5px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;width:100%;max-width:400px;margin:0 auto}mat-form-field[_ngcontent-%COMP%]{width:100%}.submit-button[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.form-title[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:300;margin-bottom:20px}.mat-dialog-container[_ngcontent-%COMP%]{padding:20px}\"]\n  }));\n  return ReservationFormDialogComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}